<!doctype html>
<html>
	<body>
	  <h1>Shopping Cart</h1>
	  <div id="cart-items"></div>
	  <button onclick="clearCart()">clear cart</button>
	  <button onclick="window.location.href='product.html'">keep shopping</button>
	  <div id="total"></div>
	  <button onclick="window.location.href='checkoutPage.html'">checkout</button>
	</body>
	<script>
		const cartItemsDiv = document.querySelector('#cart-items');

		// Retrieve cart data from local storage
		const cartItems = JSON.parse(localStorage.getItem('cartItems'));

		// Loop through cart items and create HTML elements to display item information
		// Loop through cart items and create HTML elements to display item information
		var total = 0;
		const cartTotal = document.getElementById("total");
		//const cartTotal = document.createElement('div');
		if (cartItems && cartItems.length > 0) {
			cartItems.forEach((item, index) => {
			const itemDiv = document.createElement('div');
			const itemName = document.createElement('span');
			const itemPrice = document.createElement('span');
			const itemTotal = document.createElement('span');
			const itemDesc = document.createElement('span');
			const removeBtn = document.createElement('button');
			// Set the text and attributes for the remove button
			removeBtn.textContent = 'Remove';
			removeBtn.setAttribute('data-index', index);

			// Add an event listener to the remove button
			removeBtn.addEventListener('click', (event) => {
			const itemIndex = event.target.getAttribute('data-index');
				cartItems.splice(itemIndex, 1);
				localStorage.setItem('cartItems', JSON.stringify(cartItems));
				location.reload();
			});

			itemName.textContent = item.name;
			itemPrice.textContent = '$' + item.price.toFixed(2) + ' ';
			itemDesc.textContent = 'Desc: ' + item.description;

			total += item.price;

			itemDiv.appendChild(itemName);
			itemDiv.appendChild(itemPrice);
			itemDiv.appendChild(itemDesc);
			itemDiv.appendChild(itemTotal);
			itemDiv.appendChild(removeBtn);

			cartItemsDiv.appendChild(itemDiv); 
			});
		} else {
	  		cartItemsDiv.textContent = 'Your cart is empty.';
		}
		cartTotal.innerHTML = "Total: " + total;

		function clearCart(){
			localStorage.removeItem('cartItems');
			location.reload();
		}

	  </script>

<link href="assets/css/claystyle.css" rel="stylesheet" id="theme-link">

<footer>
    <div class="container-footer w-container">
        <div class="w-row">
            <div class="footer-column w-clearfix w-col w-col-4"><img src="https://uploads-ssl.webflow.com/5966ea9a9217ca534caf139f/596d33f36607b12cfdaf8ad2_LogoWhite.png" alt="" width="40" class="failory-logo-image">
            <h3 class="footer-failory-name">Plaza</h3>
            <a href="index.html"><span class="footer-link">The Place to Buy<br></span></a>
            </div>
                <div class="footer-column w-col w-col-8">
                <div class="w-row">
                    <div class="w-col w-col-8">
                        <div class="w-row">
                            <div class="w-col w-col-7 w-col-small-6 w-col-tiny-7">
                                <h3 class="footer-titles">Purchase</h3>
                                <p class="footer-links">
                                    <a href="cart.html" target="_blank"><span class="footer-link">Cart<br></span></a>
                                    <a href="product.html"><span class="footer-link">Browse<br></span></a>
                                    <a href="checkoutPage.html"><span class="footer-link">Checkout<br></span></a>
                            </div>
                            <div class="w-col w-col-5 w-col-small-6 w-col-tiny-5">
                                <h3 class="footer-titles">Other</h3>
                                <p class="footer-links">
                                    <a href="login.html"><span class="footer-link">Login<br></span></a>
                                    <a href="register.html"><span class="footer-link">Register<br></span></a>
                                    <a href="about.html"><span class="footer-link">About Us<br></span></a>
                                    <a href="help.html"><span class="footer-link">Help<br></span></a>
                                    <a href="logout.html"><span class="footer-link">Log Out<br></span></a>
                            </div>
                        </div>
                    </div>
                    <div class="column-center-mobile w-col w-col-4">
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer> 	
</html>